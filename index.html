<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ü¶ã –í–µ—Å—ë–ª—ã–π —Ö—É–¥–æ–∂–Ω–∏–∫ - –†–µ–¥–∞–∫—Ç–æ—Ä –∏–≥—Ä—ã</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        :root {
            --primary: #6C5CE7;
            --accent: #FD79A8;
            --success: #00b894;
            --red: #ff7675;
            --blue: #74b9ff;
            --green: #55efc4;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .container {
            display: flex;
            min-height: 100vh;
        }
        
        /* –õ–ï–í–ê–Ø –ü–ê–ù–ï–õ–¨ */
        .editor-panel {
            width: 45%;
            background: white;
            overflow-y: auto;
            box-shadow: 5px 0 30px rgba(0,0,0,0.3);
        }
        
        .editor-panel::-webkit-scrollbar { width: 10px; }
        .editor-panel::-webkit-scrollbar-track { background: #f0f0f0; }
        .editor-panel::-webkit-scrollbar-thumb { 
            background: linear-gradient(135deg, var(--primary), var(--accent));
            border-radius: 10px;
        }
        
        .header {
            background: linear-gradient(135deg, var(--primary), #5848c2);
            color: white;
            padding: 30px;
            text-align: center;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 5px 20px rgba(0,0,0,0.2);
        }
        
        .header h1 {
            font-size: 2rem;
            margin-bottom: 10px;
        }
        
        .header .subtitle {
            font-size: 0.9rem;
            opacity: 0.9;
            font-weight: 600;
            letter-spacing: 2px;
        }
        
        .content {
            padding: 30px;
        }
        
        .section {
            background: #f8f9fa;
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 25px;
            border: 2px solid #e9ecef;
        }
        
        .section-title {
            font-size: 1.4rem;
            font-weight: 900;
            color: var(--primary);
            margin-bottom: 20px;
            padding-left: 15px;
            border-left: 6px solid var(--accent);
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            font-size: 0.8rem;
            font-weight: 700;
            color: #495057;
            text-transform: uppercase;
            margin-bottom: 8px;
            letter-spacing: 0.5px;
        }
        
        input[type="text"], input[type="number"], select, textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #dee2e6;
            border-radius: 10px;
            font-size: 1rem;
            font-family: inherit;
            transition: all 0.3s;
        }
        
        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(108, 92, 231, 0.1);
        }
        
        textarea {
            resize: vertical;
            min-height: 100px;
            font-family: 'Courier New', monospace;
        }
        
        /* –ó–ê–ì–†–£–ó–ö–ê –§–ê–ô–õ–û–í */
        .upload-area {
            display: flex;
            gap: 10px;
            margin-top: 10px;
            flex-wrap: wrap;
        }
        
        .upload-btn {
            flex: 1;
            min-width: 150px;
            padding: 12px;
            border: 2px dashed var(--primary);
            border-radius: 10px;
            background: white;
            cursor: pointer;
            text-align: center;
            font-weight: 700;
            color: var(--primary);
            transition: all 0.3s;
            position: relative;
        }
        
        .upload-btn:hover {
            background: rgba(108, 92, 231, 0.1);
            border-style: solid;
            transform: translateY(-2px);
        }
        
        .upload-btn input[type="file"] {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0;
            cursor: pointer;
        }
        
        .url-input {
            flex: 2;
            min-width: 200px;
        }
        
        .file-info {
            margin-top: 10px;
            padding: 12px;
            background: #d4edda;
            border: 2px solid #28a745;
            border-radius: 10px;
            font-size: 0.9rem;
            display: none;
            align-items: center;
            gap: 10px;
        }
        
        .file-info.active {
            display: flex;
        }
        
        .file-info .icon {
            font-size: 1.5rem;
        }
        
        .file-info .text {
            flex: 1;
            font-weight: 600;
        }
        
        .remove-file {
            background: #dc3545;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 700;
        }
        
        /* –ü–ï–†–°–û–ù–ê–ñ–ò */
        .chars-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(70px, 1fr));
            gap: 10px;
            margin-top: 10px;
        }
        
        .char-item {
            aspect-ratio: 1;
            border: 3px solid #dee2e6;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
            cursor: pointer;
            background: white;
            transition: all 0.3s;
        }
        
        .char-item:hover {
            transform: scale(1.1);
            border-color: var(--primary);
        }
        
        .char-item.active {
            border-color: var(--accent);
            background: linear-gradient(135deg, #fff0f5, #ffe6f0);
            box-shadow: 0 5px 15px rgba(253, 121, 168, 0.5);
            transform: scale(1.15);
        }
        
        /* –ö–ù–û–ü–ö–ò */
        .actions {
            display: flex;
            gap: 15px;
            margin-top: 30px;
            position: sticky;
            bottom: 0;
            background: white;
            padding: 20px 0;
            border-top: 2px solid #f0f0f0;
        }
        
        .btn {
            flex: 1;
            padding: 18px;
            border: none;
            border-radius: 12px;
            font-weight: 900;
            font-size: 1.1rem;
            cursor: pointer;
            text-transform: uppercase;
            transition: all 0.3s;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, var(--primary), #5848c2);
            color: white;
            box-shadow: 0 6px 0 #4834D4;
        }
        
        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 9px 0 #4834D4;
        }
        
        .btn-primary:active {
            transform: translateY(2px);
            box-shadow: 0 4px 0 #4834D4;
        }
        
        .btn-success {
            background: linear-gradient(135deg, var(--success), #00a884);
            color: white;
            box-shadow: 0 6px 0 #00896c;
        }
        
        .btn-success:hover {
            transform: translateY(-3px);
            box-shadow: 0 9px 0 #00896c;
        }
        
        .btn-success:active {
            transform: translateY(2px);
            box-shadow: 0 4px 0 #00896c;
        }
        
        /* –ü–†–ê–í–ê–Ø –ü–ê–ù–ï–õ–¨ */
        .preview-panel {
            width: 55%;
            display: flex;
            flex-direction: column;
            background: #2d3436;
        }
        
        .preview-header {
            background: #2d3436;
            color: white;
            padding: 20px 25px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .preview-header h2 {
            font-size: 1.4rem;
        }
        
        .preview-controls {
            display: flex;
            gap: 10px;
        }
        
        .preview-btn {
            padding: 10px 20px;
            border: 2px solid white;
            background: transparent;
            color: white;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 700;
            transition: all 0.3s;
        }
        
        .preview-btn:hover {
            background: white;
            color: #2d3436;
        }
        
        .preview-content {
            flex: 1;
            background: #f5f5f5;
            position: relative;
            overflow: hidden;
        }
        
        .preview-iframe {
            width: 100%;
            height: 100%;
            border: none;
            background: white;
        }
        
        .preview-placeholder {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100%;
            color: #636e72;
            padding: 40px;
            text-align: center;
        }
        
        .preview-placeholder-icon {
            font-size: 6rem;
            margin-bottom: 20px;
            opacity: 0.3;
        }
        
        .preview-placeholder h3 {
            font-size: 1.5rem;
            margin-bottom: 10px;
        }
        
        /* –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.85);
            z-index: 10000;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        
        .modal.active {
            display: flex;
        }
        
        .modal-content {
            background: white;
            border-radius: 20px;
            padding: 40px;
            max-width: 900px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
        }
        
        .modal-close {
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 2rem;
            cursor: pointer;
            color: #636e72;
            background: none;
            border: none;
            transition: all 0.3s;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
        }
        
        .modal-close:hover {
            color: white;
            background: var(--red);
            transform: rotate(90deg);
        }
        
        .modal h3 {
            color: var(--primary);
            font-size: 2rem;
            margin-bottom: 20px;
            padding-right: 40px;
        }
        
        .modal p {
            color: #636e72;
            margin-bottom: 20px;
            line-height: 1.6;
        }
        
        .code-box {
            background: #2d3436;
            color: #00b894;
            padding: 20px;
            border-radius: 10px;
            font-family: 'Courier New', monospace;
            font-size: 0.85rem;
            overflow-x: auto;
            margin: 20px 0;
            position: relative;
            max-height: 400px;
            overflow-y: auto;
            white-space: pre-wrap;
            word-wrap: break-word;
        }
        
        .copy-btn {
            position: sticky;
            top: 10px;
            right: 10px;
            float: right;
            padding: 10px 20px;
            background: var(--success);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 700;
            margin-bottom: 10px;
            z-index: 1;
        }
        
        .copy-btn:hover {
            background: #00a884;
        }
        
        .copy-btn.copied {
            background: #28a745;
        }
        
        /* RESPONSIVE */
        @media (max-width: 1024px) {
            .container {
                flex-direction: column;
            }
            
            .editor-panel, .preview-panel {
                width: 100%;
            }
            
            .preview-panel {
                min-height: 600px;
            }
        }
    </style>
</head>
<body>

<div class="container">
    <!-- –õ–ï–í–ê–Ø –ü–ê–ù–ï–õ–¨ -->
    <div class="editor-panel">
        <div class="header">
            <h1>ü¶ã –í–µ—Å—ë–ª—ã–π —Ö—É–¥–æ–∂–Ω–∏–∫</h1>
            <div class="subtitle">–†–ï–î–ê–ö–¢–û–† –ò–ì–†–´ | DEUTSCH INTERAKTIV</div>
        </div>
        
        <div class="content">
            <!-- –Ø–ó–´–ö –ò–ì–†–´ -->
            <div class="section">
                <div class="section-title">üåç –Ø–∑—ã–∫ –∏–≥—Ä—ã</div>
                <div class="form-group">
                    <label>–í—ã–±–µ—Ä–∏—Ç–µ —è–∑—ã–∫ –¥–ª—è –Ω–∞–¥–ø–∏—Å–µ–π –≤ –∏–≥—Ä–µ</label>
                    <select id="gameLang" onchange="updateGameLanguage()">
                        <option value="ru">üá∑üá∫ –†—É—Å—Å–∫–∏–π (Russian)</option>
                        <option value="de" selected>üá©üá™ Deutsch (German)</option>
                        <option value="en">üá¨üáß English</option>
                        <option value="es">üá™üá∏ Espa√±ol (Spanish)</option>
                        <option value="it">üáÆüáπ Italiano (Italian)</option>
                        <option value="fr">üá´üá∑ Fran√ßais (French)</option>
                        <option value="zh">üá®üá≥ ‰∏≠Êñá (Chinese)</option>
                        <option value="ja">üáØüáµ Êó•Êú¨Ë™û (Japanese)</option>
                    </select>
                </div>
            </div>
            
            <!-- –§–û–ù -->
            <div class="section">
                <div class="section-title">üé® –§–æ–Ω –∏–≥—Ä—ã</div>
                <div class="form-group">
                    <label>–ì–æ—Ç–æ–≤—ã–µ —Ñ–æ–Ω—ã</label>
                    <select id="bgTheme" onchange="updateBackground()">
                        <option value="garden" selected>üåª –û–≥–æ—Ä–æ–¥</option>
                        <option value="meadow">üå∏ –õ—É–≥</option>
                        <option value="forest">üå≤ –õ–µ—Å</option>
                        <option value="space">üöÄ –ö–æ—Å–º–æ—Å</option>
                        <option value="ocean">üåä –û–∫–µ–∞–Ω</option>
                        <option value="custom">üé® –°–≤–æ–π —Ñ–æ–Ω</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>–ò–ª–∏ –∑–∞–≥—Ä—É–∑–∏—Ç–µ —Å–≤–æ–π —Ñ–æ–Ω</label>
                    <div class="upload-area">
                        <label class="upload-btn">
                            üìÅ –° –∫–æ–º–ø—å—é—Ç–µ—Ä–∞
                            <input type="file" accept="image/*" onchange="handleFileUpload('bg', this)">
                        </label>
                        <input type="text" class="url-input" id="bgUrl" placeholder="üîó –ò–ª–∏ –≤—Å—Ç–∞–≤—å—Ç–µ URL –∫–∞—Ä—Ç–∏–Ω–∫–∏">
                    </div>
                    <div class="file-info" id="bgInfo">
                        <span class="icon">‚úÖ</span>
                        <span class="text" id="bgInfoText"></span>
                        <button class="remove-file" onclick="removeFile('bg')">‚úï</button>
                    </div>
                </div>
            </div>
            
            <!-- –ì–õ–ê–í–ù–´–ô –ü–ï–†–°–û–ù–ê–ñ -->
            <div class="section">
                <div class="section-title">üë§ –ì–ª–∞–≤–Ω—ã–π –ø–µ—Ä—Å–æ–Ω–∞–∂</div>
                <div class="form-group">
                    <label>–í—ã–±–µ—Ä–∏—Ç–µ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ (–∫–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ –Ω—É–∂–Ω—ã–π)</label>
                    <div class="chars-grid" id="heroGrid">
                        <div class="char-item active" data-value="ü¶ã" onclick="selectCharacter('hero', this)">ü¶ã</div>
                        <div class="char-item" data-value="üë®‚Äçüé®" onclick="selectCharacter('hero', this)">üë®‚Äçüé®</div>
                        <div class="char-item" data-value="üë©‚Äçüé®" onclick="selectCharacter('hero', this)">üë©‚Äçüé®</div>
                        <div class="char-item" data-value="üêù" onclick="selectCharacter('hero', this)">üêù</div>
                        <div class="char-item" data-value="üê∏" onclick="selectCharacter('hero', this)">üê∏</div>
                        <div class="char-item" data-value="üê±" onclick="selectCharacter('hero', this)">üê±</div>
                    </div>
                </div>
                <div class="form-group">
                    <label>–ò–ª–∏ –∑–∞–≥—Ä—É–∑–∏—Ç–µ GIF-–∞–Ω–∏–º–∞—Ü–∏—é</label>
                    <div class="upload-area">
                        <label class="upload-btn">
                            üìÅ –ó–∞–≥—Ä—É–∑–∏—Ç—å GIF
                            <input type="file" accept="image/gif" onchange="handleFileUpload('hero', this)">
                        </label>
                        <input type="text" class="url-input" id="heroUrl" placeholder="üîó URL GIF">
                    </div>
                    <div class="file-info" id="heroInfo">
                        <span class="icon">‚úÖ</span>
                        <span class="text" id="heroInfoText"></span>
                        <button class="remove-file" onclick="removeFile('hero')">‚úï</button>
                    </div>
                </div>
            </div>
            
            <!-- –ü–ï–†–°–û–ù–ê–ñ –ü–†–ò –û–®–ò–ë–ö–ï -->
            <div class="section">
                <div class="section-title">‚ö†Ô∏è –ü–µ—Ä—Å–æ–Ω–∞–∂ –ø—Ä–∏ –æ—à–∏–±–∫–µ</div>
                <div class="form-group">
                    <label>–í—ã–±–µ—Ä–∏—Ç–µ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ (–∫–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ –Ω—É–∂–Ω—ã–π)</label>
                    <div class="chars-grid" id="enemyGrid">
                        <div class="char-item active" data-value="üò†üêù" onclick="selectCharacter('enemy', this)">üò†üêù</div>
                        <div class="char-item" data-value="‚ö°" onclick="selectCharacter('enemy', this)">‚ö°</div>
                        <div class="char-item" data-value="üåßÔ∏è" onclick="selectCharacter('enemy', this)">üåßÔ∏è</div>
                        <div class="char-item" data-value="üëª" onclick="selectCharacter('enemy', this)">üëª</div>
                        <div class="char-item" data-value="ü¶á" onclick="selectCharacter('enemy', this)">ü¶á</div>
                    </div>
                </div>
                <div class="form-group">
                    <label>–ò–ª–∏ –∑–∞–≥—Ä—É–∑–∏—Ç–µ GIF</label>
                    <div class="upload-area">
                        <label class="upload-btn">
                            üìÅ –ó–∞–≥—Ä—É–∑–∏—Ç—å GIF
                            <input type="file" accept="image/gif" onchange="handleFileUpload('enemy', this)">
                        </label>
                        <input type="text" class="url-input" id="enemyUrl" placeholder="üîó URL GIF">
                    </div>
                    <div class="file-info" id="enemyInfo">
                        <span class="icon">‚úÖ</span>
                        <span class="text" id="enemyInfoText"></span>
                        <button class="remove-file" onclick="removeFile('enemy')">‚úï</button>
                    </div>
                </div>
            </div>
            
            <!-- –ù–ê–ì–†–ê–î–ê -->
            <div class="section">
                <div class="section-title">üéÅ –ù–∞–≥—Ä–∞–¥–∞ –∑–∞ —É—Å–ø–µ—Ö</div>
                <div class="form-group">
                    <label>–í—ã–±–µ—Ä–∏—Ç–µ –Ω–∞–≥—Ä–∞–¥—É (–∫–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ –Ω—É–∂–Ω—É—é)</label>
                    <div class="chars-grid" id="rewardGrid">
                        <div class="char-item active" data-value="üåπ" onclick="selectCharacter('reward', this)">üåπ</div>
                        <div class="char-item" data-value="üèÜ" onclick="selectCharacter('reward', this)">üèÜ</div>
                        <div class="char-item" data-value="‚≠ê" onclick="selectCharacter('reward', this)">‚≠ê</div>
                        <div class="char-item" data-value="üèÖ" onclick="selectCharacter('reward', this)">üèÖ</div>
                        <div class="char-item" data-value="üéâ" onclick="selectCharacter('reward', this)">üéâ</div>
                    </div>
                </div>
                <div class="form-group">
                    <label>–ò–ª–∏ –∑–∞–≥—Ä—É–∑–∏—Ç–µ GIF</label>
                    <div class="upload-area">
                        <label class="upload-btn">
                            üìÅ –ó–∞–≥—Ä—É–∑–∏—Ç—å GIF
                            <input type="file" accept="image/gif" onchange="handleFileUpload('reward', this)">
                        </label>
                        <input type="text" class="url-input" id="rewardUrl" placeholder="üîó URL GIF">
                    </div>
                    <div class="file-info" id="rewardInfo">
                        <span class="icon">‚úÖ</span>
                        <span class="text" id="rewardInfoText"></span>
                        <button class="remove-file" onclick="removeFile('reward')">‚úï</button>
                    </div>
                </div>
            </div>
            
            <!-- –ó–í–£–ö–ò -->
            <div class="section">
                <div class="section-title">üîä –ó–≤—É–∫–∏ –∏ –º—É–∑—ã–∫–∞</div>
                <div class="form-group">
                    <label>–ó–≤—É–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞</label>
                    <div class="upload-area">
                        <label class="upload-btn">
                            üìÅ –ó–∞–≥—Ä—É–∑–∏—Ç—å
                            <input type="file" accept="audio/*" onchange="handleFileUpload('soundSuccess', this)">
                        </label>
                        <input type="text" class="url-input" id="soundSuccessUrl" placeholder="üîó URL –∑–≤—É–∫–∞ (.mp3, .wav)">
                    </div>
                    <div class="file-info" id="soundSuccessInfo">
                        <span class="icon">‚úÖ</span>
                        <span class="text" id="soundSuccessInfoText"></span>
                        <button class="remove-file" onclick="removeFile('soundSuccess')">‚úï</button>
                    </div>
                </div>
                
                <div class="form-group">
                    <label>–ó–≤—É–∫ –æ—à–∏–±–∫–∏</label>
                    <div class="upload-area">
                        <label class="upload-btn">
                            üìÅ –ó–∞–≥—Ä—É–∑–∏—Ç—å
                            <input type="file" accept="audio/*" onchange="handleFileUpload('soundError', this)">
                        </label>
                        <input type="text" class="url-input" id="soundErrorUrl" placeholder="üîó URL –∑–≤—É–∫–∞">
                    </div>
                    <div class="file-info" id="soundErrorInfo">
                        <span class="icon">‚úÖ</span>
                        <span class="text" id="soundErrorInfoText"></span>
                        <button class="remove-file" onclick="removeFile('soundError')">‚úï</button>
                    </div>
                </div>
                
                <div class="form-group">
                    <label>–§–æ–Ω–æ–≤–∞—è –º—É–∑—ã–∫–∞</label>
                    <div class="upload-area">
                        <label class="upload-btn">
                            üìÅ –ó–∞–≥—Ä—É–∑–∏—Ç—å
                            <input type="file" accept="audio/*" onchange="handleFileUpload('musicBg', this)">
                        </label>
                        <input type="text" class="url-input" id="musicBgUrl" placeholder="üîó URL –º—É–∑—ã–∫–∏">
                    </div>
                    <div class="file-info" id="musicBgInfo">
                        <span class="icon">‚úÖ</span>
                        <span class="text" id="musicBgInfoText"></span>
                        <button class="remove-file" onclick="removeFile('musicBg')">‚úï</button>
                    </div>
                </div>
            </div>
            
            <!-- –°–õ–û–í–ê -->
            <div class="section">
                <div class="section-title">üìö –°–ª–æ–≤–∞ –¥–ª—è –∏–≥—Ä—ã</div>
                <div class="form-group">
                    <label>Der (—Å–∏–Ω–∏–π) - –º—É–∂—Å–∫–æ–π —Ä–æ–¥</label>
                    <textarea id="wordsDer" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å–ª–æ–≤–∞ —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é">Hund, Fisch, Vogel, Hamster, Igel, Hai, Affe, Delphin, Elefant</textarea>
                </div>
                <div class="form-group">
                    <label>Die (–∫—Ä–∞—Å–Ω—ã–π) - –∂–µ–Ω—Å–∫–∏–π —Ä–æ–¥</label>
                    <textarea id="wordsDie" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å–ª–æ–≤–∞ —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é">Katze, Maus, Spinne, Gans, Fliege, Kuh, Ziege, Biene, Ameise, Schlange</textarea>
                </div>
                <div class="form-group">
                    <label>Das (–∑–µ–ª—ë–Ω—ã–π) - —Å—Ä–µ–¥–Ω–∏–π —Ä–æ–¥</label>
                    <textarea id="wordsDas" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å–ª–æ–≤–∞ —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é">Schwein, Reh, Pferd, Huhn, Schaf, Kaninchen, Nashorn, Krokodil, Wildschwein</textarea>
                </div>
            </div>
            
            <!-- –ù–ê–°–¢–†–û–ô–ö–ò -->
            <div class="section">
                <div class="section-title">‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–≥—Ä—ã</div>
                <div class="form-group">
                    <label>–£—Ä–æ–≤–µ–Ω—å —Å–ª–æ–∂–Ω–æ—Å—Ç–∏</label>
                    <select id="gameLevel">
                        <option value="easy" selected>ü¶ã –õ—ë–≥–∫–∏–π (–ë–∞–±–æ—á–∫–∞)</option>
                        <option value="medium">üå∫ –°—Ä–µ–¥–Ω–∏–π (–ì–µ–æ—Ä–≥–∏–Ω–∞)</option>
                        <option value="hard">üè† –°–ª–æ–∂–Ω—ã–π (–î–æ–º)</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>–í—Ä–µ–º—è –Ω–∞ –∑–∞–¥–∞–Ω–∏–µ (—Å–µ–∫—É–Ω–¥—ã)</label>
                    <input type="number" id="timerValue" value="20" min="5" max="120">
                </div>
                <div class="form-group">
                    <label>–¢–µ–∫—Å—Ç –ø–æ–±–µ–¥—ã</label>
                    <input type="text" id="winText" value="Wir gratulieren! Gute Arbeit!">
                </div>
                <div class="form-group">
                    <label>–¢–µ–∫—Å—Ç –ø—Ä–∏ –æ—à–∏–±–∫–µ</label>
                    <input type="text" id="errorText" value="Versuch noch einmal!">
                </div>
            </div>
            
            <!-- –ö–ù–û–ü–ö–ò -->
            <div class="actions">
                <button class="btn btn-primary" onclick="showPreview()">
                    üëÅÔ∏è –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä
                </button>
                <button class="btn btn-success" onclick="generateIframeCode()">
                    üìã –ü–æ–ª—É—á–∏—Ç—å –∫–æ–¥
                </button>
            </div>
        </div>
    </div>
    
    <!-- –ü–†–ê–í–ê–Ø –ü–ê–ù–ï–õ–¨ -->
    <div class="preview-panel">
        <div class="preview-header">
            <h2>üéÆ –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –∏–≥—Ä—ã</h2>
            <div class="preview-controls">
                <button class="preview-btn" onclick="showPreview()">üîÑ –û–±–Ω–æ–≤–∏—Ç—å</button>
            </div>
        </div>
        <div class="preview-content" id="previewArea">
            <div class="preview-placeholder">
                <div class="preview-placeholder-icon">üé®</div>
                <h3>–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –∏–≥—Ä—ã</h3>
                <p>–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Å–ª–µ–≤–∞ –∏ –Ω–∞–∂–º–∏—Ç–µ "–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä"<br>—á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å –Ω–∞—á–∞–ª–æ –≤–∞—à–µ–π –∏–≥—Ä—ã</p>
            </div>
        </div>
    </div>
</div>

<!-- –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û –î–õ–Ø –ö–û–î–ê -->
<div class="modal" id="codeModal">
    <div class="modal-content">
        <button class="modal-close" onclick="closeCodeModal()">√ó</button>
        <h3>üìã –ö–æ–¥ iframe –¥–ª—è –≤—Å—Ç–∞–≤–∫–∏ –≤ Genially</h3>
        <p><strong>–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:</strong></p>
        <ol style="margin-left: 20px; margin-bottom: 20px; line-height: 1.8;">
            <li>–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∫–æ–¥ –Ω–∏–∂–µ (–Ω–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å")</li>
            <li>–û—Ç–∫—Ä–æ–π—Ç–µ –≤–∞—à—É –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—é –≤ Genially</li>
            <li>–ù–∞–∂–º–∏—Ç–µ: <strong>–í—Å—Ç–∞–≤–∫–∞ ‚Üí HTML/Embed</strong></li>
            <li>–í—Å—Ç–∞–≤—å—Ç–µ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥</li>
            <li>–ù–∞–∂–º–∏—Ç–µ "Insert" - –≥–æ—Ç–æ–≤–æ! üéâ</li>
        </ol>
        <div class="code-box">
            <button class="copy-btn" id="copyBtn" onclick="copyIframeCode()">üìã –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>
            <pre id="iframeCodeDisplay"></pre>
        </div>
        <p style="font-size: 0.9rem; color: #28a745; margin-top: 15px;">
            ‚úÖ –≠—Ç–æ—Ç –∫–æ–¥ —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–æ–ª–Ω—É—é –∏–≥—Ä—É —Å–æ –≤—Å–µ–º–∏ –≤–∞—à–∏–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏<br>
            ‚úÖ –í—Å–µ –∫–∞—Ä—Ç–∏–Ω–∫–∏ –∏ –∑–≤—É–∫–∏ –≤—Å—Ç—Ä–æ–µ–Ω—ã - —Ä–∞–±–æ—Ç–∞–µ—Ç –∞–≤—Ç–æ–Ω–æ–º–Ω–æ<br>
            ‚úÖ –ú–æ–∂–Ω–æ –≤—Å—Ç–∞–≤–ª—è—Ç—å –≤ Genially, Google Slides, –Ω–∞ —Å–∞–π—Ç—ã
        </p>
    </div>
</div>

<script>
// –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø –ò–ì–†–´
const gameConfig = {
    lang: 'de',
    bg: { type: 'garden', data: '' },
    hero: { type: 'emoji', value: 'ü¶ã', data: '' },
    enemy: { type: 'emoji', value: 'üò†üêù', data: '' },
    reward: { type: 'emoji', value: 'üåπ', data: '' },
    sounds: {
        success: '',
        error: '',
        bgMusic: ''
    },
    words: {
        der: 'Hund, Fisch, Vogel, Hamster, Igel, Hai, Affe, Delphin, Elefant',
        die: 'Katze, Maus, Spinne, Gans, Fliege, Kuh, Ziege, Biene, Ameise, Schlange',
        das: 'Schwein, Reh, Pferd, Huhn, Schaf, Kaninchen, Nashorn, Krokodil, Wildschwein'
    },
    settings: {
        level: 'easy',
        timer: 20,
        winText: 'Wir gratulieren! Gute Arbeit!',
        errorText: 'Versuch noch einmal!'
    }
};

// –ü–ï–†–ï–í–û–î–´ –î–õ–Ø –ò–ì–†–´
const gameTranslations = {
    ru: {
        selectWord: '–í—ã–±–µ—Ä–∏—Ç–µ —Å–ª–æ–≤–æ:',
        timer: '–í—Ä–µ–º—è:',
        progress: '–ü—Ä–æ–≥—Ä–µ—Å—Å',
        start: '–ù–∞—á–∞—Ç—å',
        winTitle: '–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º!',
        tryAgain: '–ü–æ–ø—Ä–æ–±—É–π —Å–Ω–æ–≤–∞'
    },
    de: {
        selectWord: 'W√§hle ein Wort:',
        timer: 'Zeit:',
        progress: 'Fortschritt',
        start: 'Start',
        winTitle: 'Gl√ºckwunsch!',
        tryAgain: 'Nochmal'
    },
    en: {
        selectWord: 'Choose a word:',
        timer: 'Time:',
        progress: 'Progress',
        start: 'Start',
        winTitle: 'Congratulations!',
        tryAgain: 'Try again'
    },
    es: {
        selectWord: 'Elige una palabra:',
        timer: 'Tiempo:',
        progress: 'Progreso',
        start: 'Comenzar',
        winTitle: '¬°Felicidades!',
        tryAgain: 'Intentar de nuevo'
    },
    it: {
        selectWord: 'Scegli una parola:',
        timer: 'Tempo:',
        progress: 'Progresso',
        start: 'Inizia',
        winTitle: 'Congratulazioni!',
        tryAgain: 'Riprova'
    },
    fr: {
        selectWord: 'Choisissez un mot:',
        timer: 'Temps:',
        progress: 'Progr√®s',
        start: 'Commencer',
        winTitle: 'F√©licitations!',
        tryAgain: 'R√©essayer'
    },
    zh: {
        selectWord: 'ÈÄâÊã©‰∏Ä‰∏™ËØç:',
        timer: 'Êó∂Èó¥:',
        progress: 'ËøõÂ∫¶',
        start: 'ÂºÄÂßã',
        winTitle: 'ÊÅ≠Âñú!',
        tryAgain: 'ÂÜçËØï‰∏ÄÊ¨°'
    },
    ja: {
        selectWord: 'ÂçòË™û„ÇíÈÅ∏Êäû:',
        timer: 'ÊôÇÈñì:',
        progress: 'ÈÄ≤Êçó',
        start: '„Çπ„Çø„Éº„Éà',
        winTitle: '„Åä„ÇÅ„Åß„Å®„ÅÜ!',
        tryAgain: '„ÇÇ„ÅÜ‰∏ÄÂ∫¶'
    }
};

// –û–ë–ù–û–í–õ–ï–ù–ò–ï –Ø–ó–´–ö–ê –ò–ì–†–´
function updateGameLanguage() {
    gameConfig.lang = document.getElementById('gameLang').value;
}

// –û–ë–ù–û–í–õ–ï–ù–ò–ï –§–û–ù–ê
function updateBackground() {
    gameConfig.bg.type = document.getElementById('bgTheme').value;
}

// –ó–ê–ì–†–£–ó–ö–ê –§–ê–ô–õ–ê
function handleFileUpload(type, input) {
    const file = input.files[0];
    if (!file) return;
    
    console.log('–ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞:', type, file.name);
    
    const reader = new FileReader();
    reader.onload = function(e) {
        const data = e.target.result;
        const info = document.getElementById(type + 'Info');
        const infoText = document.getElementById(type + 'InfoText');
        
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∑–∞–≥—Ä—É–∑–∫–µ
        if (info && infoText) {
            infoText.textContent = '–ó–∞–≥—Ä—É–∂–µ–Ω–æ: ' + file.name;
            info.classList.add('active');
        }
        
        // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
        if (type === 'bg') {
            gameConfig.bg.type = 'custom';
            gameConfig.bg.data = data;
        } else if (['hero', 'enemy', 'reward'].includes(type)) {
            gameConfig[type].type = 'custom';
            gameConfig[type].data = data;
        } else if (type.startsWith('sound') || type === 'musicBg') {
            const soundKey = type === 'soundSuccess' ? 'success' : 
                           type === 'soundError' ? 'error' : 'bgMusic';
            gameConfig.sounds[soundKey] = data;
        }
        
        console.log('–§–∞–π–ª –∑–∞–≥—Ä—É–∂–µ–Ω –∏ —Å–æ—Ö—Ä–∞–Ω—ë–Ω –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:', type);
    };
    reader.readAsDataURL(file);
}

// –£–î–ê–õ–ï–ù–ò–ï –§–ê–ô–õ–ê
function removeFile(type) {
    const info = document.getElementById(type + 'Info');
    if (info) {
        info.classList.remove('active');
    }
    
    // –û—á–∏—â–∞–µ–º –∏–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
    if (type === 'bg') {
        gameConfig.bg.data = '';
        gameConfig.bg.type = document.getElementById('bgTheme').value;
    } else if (['hero', 'enemy', 'reward'].includes(type)) {
        gameConfig[type].type = 'emoji';
        gameConfig[type].data = '';
    } else if (type.startsWith('sound') || type === 'musicBg') {
        const soundKey = type === 'soundSuccess' ? 'success' : 
                       type === 'soundError' ? 'error' : 'bgMusic';
        gameConfig.sounds[soundKey] = '';
    }
    
    console.log('–§–∞–π–ª —É–¥–∞–ª—ë–Ω:', type);
}

// –í–´–ë–û–† –ü–ï–†–°–û–ù–ê–ñ–ê
function selectCharacter(type, element) {
    console.log('–í—ã–±–æ—Ä –ø–µ—Ä—Å–æ–Ω–∞–∂–∞:', type, element.dataset.value);
    
    // –£–±–∏—Ä–∞–µ–º active —Å–æ –≤—Å–µ—Ö –≤ —ç—Ç–æ–π –≥—Ä—É–ø–ø–µ
    const grid = element.parentElement;
    grid.querySelectorAll('.char-item').forEach(item => {
        item.classList.remove('active');
    });
    
    // –î–æ–±–∞–≤–ª—è–µ–º active –≤—ã–±—Ä–∞–Ω–Ω–æ–º—É
    element.classList.add('active');
    
    // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
    gameConfig[type].type = 'emoji';
    gameConfig[type].value = element.dataset.value;
    gameConfig[type].data = '';
    
    console.log('–ü–µ—Ä—Å–æ–Ω–∞–∂ –≤—ã–±—Ä–∞–Ω –∏ —Å–æ—Ö—Ä–∞–Ω—ë–Ω:', type, gameConfig[type].value);
}

// –°–ë–û–† –í–°–ï–• –î–ê–ù–ù–´–•
function collectAllData() {
    // –Ø–∑—ã–∫
    gameConfig.lang = document.getElementById('gameLang').value;
    
    // –§–æ–Ω
    const bgUrl = document.getElementById('bgUrl').value;
    if (bgUrl) {
        gameConfig.bg.type = 'custom';
        gameConfig.bg.data = bgUrl;
    }
    
    // URL –¥–ª—è –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π
    const heroUrl = document.getElementById('heroUrl').value;
    if (heroUrl) {
        gameConfig.hero.type = 'url';
        gameConfig.hero.data = heroUrl;
    }
    
    const enemyUrl = document.getElementById('enemyUrl').value;
    if (enemyUrl) {
        gameConfig.enemy.type = 'url';
        gameConfig.enemy.data = enemyUrl;
    }
    
    const rewardUrl = document.getElementById('rewardUrl').value;
    if (rewardUrl) {
        gameConfig.reward.type = 'url';
        gameConfig.reward.data = rewardUrl;
    }
    
    // URL –¥–ª—è –∑–≤—É–∫–æ–≤
    const soundSuccessUrl = document.getElementById('soundSuccessUrl').value;
    if (soundSuccessUrl) gameConfig.sounds.success = soundSuccessUrl;
    
    const soundErrorUrl = document.getElementById('soundErrorUrl').value;
    if (soundErrorUrl) gameConfig.sounds.error = soundErrorUrl;
    
    const musicBgUrl = document.getElementById('musicBgUrl').value;
    if (musicBgUrl) gameConfig.sounds.bgMusic = musicBgUrl;
    
    // –°–ª–æ–≤–∞
    gameConfig.words.der = document.getElementById('wordsDer').value;
    gameConfig.words.die = document.getElementById('wordsDie').value;
    gameConfig.words.das = document.getElementById('wordsDas').value;
    
    // –ù–∞—Å—Ç—Ä–æ–π–∫–∏
    gameConfig.settings.level = document.getElementById('gameLevel').value;
    gameConfig.settings.timer = parseInt(document.getElementById('timerValue').value);
    gameConfig.settings.winText = document.getElementById('winText').value;
    gameConfig.settings.errorText = document.getElementById('errorText').value;
    
    console.log('–°–æ–±—Ä–∞–Ω–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:', gameConfig);
}

// –ì–ï–ù–ï–†–ê–¶–ò–Ø HTML –ò–ì–†–´
function generateGameHTML() {
    collectAllData();
    
    const t = gameTranslations[gameConfig.lang] || gameTranslations.de;
    
    // –§–æ–Ω
    const bgStyles = {
        garden: 'linear-gradient(135deg, #a8edea 0%, #fed6e3 100%)',
        meadow: 'linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%)',
        forest: 'linear-gradient(135deg, #d4fc79 0%, #96e6a1 100%)',
        space: 'linear-gradient(135deg, #1e3c72 0%, #2a5298 100%)',
        ocean: 'linear-gradient(135deg, #00d2ff 0%, #3a7bd5 100%)'
    };
    
    let bgStyle = '';
    if (gameConfig.bg.data) {
        bgStyle = `background-image: url('${gameConfig.bg.data}'); background-size: cover; background-position: center;`;
    } else {
        bgStyle = `background: ${bgStyles[gameConfig.bg.type] || bgStyles.garden};`;
    }
    
    // –ü–µ—Ä—Å–æ–Ω–∞–∂–∏
    const heroDisplay = gameConfig.hero.data ? 
        `<img src="${gameConfig.hero.data}" style="width:100%; height:100%; object-fit:contain;">` : 
        gameConfig.hero.value;
    
    const enemyDisplay = gameConfig.enemy.data ? 
        `<img src="${gameConfig.enemy.data}" style="width:100%; height:100%; object-fit:contain;">` : 
        gameConfig.enemy.value;
    
    const rewardDisplay = gameConfig.reward.data ? 
        `<img src="${gameConfig.reward.data}" style="width:100%; height:100%; object-fit:contain;">` : 
        gameConfig.reward.value;
    
    // –°–ª–æ–≤–∞
    const wordsData = {
        der: gameConfig.words.der.split(',').map(w => w.trim()).filter(w => w),
        die: gameConfig.words.die.split(',').map(w => w.trim()).filter(w => w),
        das: gameConfig.words.das.split(',').map(w => w.trim()).filter(w => w)
    };
    
    return `<!DOCTYPE html>
<html lang="${gameConfig.lang}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–í–µ—Å—ë–ª—ã–π —Ö—É–¥–æ–∂–Ω–∏–∫</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Comic Sans MS', Arial, sans-serif;
            ${bgStyle}
            overflow: hidden;
        }
        .game-screen {
            width: 100vw;
            height: 100vh;
            display: flex;
            flex-direction: column;
            position: relative;
        }
        .top-bar {
            height: 80px;
            background: rgba(255,255,255,0.95);
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 30px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.2);
            z-index: 100;
        }
        .progress-container {
            flex: 1;
            max-width: 400px;
            height: 50px;
            background: #f0f0f0;
            border-radius: 25px;
            border: 3px solid #6C5CE7;
            overflow: hidden;
            position: relative;
        }
        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #6C5CE7, #FD79A8);
            width: 0%;
            transition: width 0.5s ease;
        }
        .water-drops {
            position: absolute;
            top: 50%;
            left: 10px;
            transform: translateY(-50%);
            display: flex;
            gap: 5px;
            z-index: 1;
        }
        .water-drop {
            font-size: 1.5rem;
            animation: dropIn 0.5s ease;
        }
        @keyframes dropIn {
            from { transform: scale(0); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }
        .timer {
            font-size: 2rem;
            font-weight: bold;
            color: #6C5CE7;
            min-width: 100px;
            text-align: center;
        }
        .timer.warning { color: #e74c3c; animation: pulse 0.5s infinite; }
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }
        .game-area {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            padding: 20px;
        }
        .butterfly-container {
            width: 400px;
            height: 400px;
            position: relative;
        }
        .butterfly {
            width: 100%;
            height: 100%;
            position: relative;
        }
        .butterfly.animated {
            animation: fly 4s ease-in-out infinite;
        }
        @keyframes fly {
            0%, 100% { transform: translate(0, 0); }
            25% { transform: translate(30px, -30px); }
            50% { transform: translate(0, -60px); }
            75% { transform: translate(-30px, -30px); }
        }
        .wing {
            position: absolute;
            width: 150px;
            height: 200px;
            border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
            border: 5px solid #2d3436;
            background: #e0e0e0;
            display: flex;
            flex-wrap: wrap;
        }
        .wing-left { left: 50px; top: 100px; transform: rotate(-15deg); }
        .wing-right { right: 50px; top: 100px; transform: rotate(15deg); }
        .wing-segment {
            flex: 1 1 33%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.7rem;
            font-weight: bold;
            color: white;
            text-align: center;
            padding: 3px;
            transition: all 0.5s ease;
        }
        .wing-segment.colored {
            box-shadow: inset 0 0 20px rgba(255,255,255,0.5), 0 0 15px currentColor;
        }
        .butterfly-body {
            position: absolute;
            width: 50px;
            height: 180px;
            background: linear-gradient(180deg, #2d3436, #636e72);
            border-radius: 25px;
            left: 50%;
            top: 130px;
            transform: translateX(-50%);
        }
        .butterfly-head {
            position: absolute;
            width: 60px;
            height: 60px;
            background: #2d3436;
            border-radius: 50%;
            left: 50%;
            top: 110px;
            transform: translateX(-50%);
        }
        .antenna {
            position: absolute;
            width: 2px;
            height: 30px;
            background: #2d3436;
            top: -25px;
        }
        .antenna-left { left: 15px; transform: rotate(-30deg); }
        .antenna-right { right: 15px; transform: rotate(30deg); }
        .antenna::after {
            content: '‚≠ï';
            position: absolute;
            top: -10px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 1rem;
        }
        .rose-container {
            position: absolute;
            bottom: -60px;
            left: 50%;
            transform: translateX(-50%);
            width: 200px;
            height: 200px;
        }
        .rose {
            position: relative;
            width: 120px;
            height: 120px;
            margin: 0 auto;
        }
        .rose.animated {
            animation: roseGlow 2s ease-in-out infinite;
        }
        @keyframes roseGlow {
            0%, 100% { filter: drop-shadow(0 0 10px #ff7675); }
            50% { filter: drop-shadow(0 0 20px #e74c3c); }
        }
        .rose-center {
            position: absolute;
            width: 30px;
            height: 30px;
            background: #ffd93d;
            border-radius: 50%;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 5;
        }
        .petal {
            position: absolute;
            width: 60px;
            height: 60px;
            background: #2d3436;
            border-radius: 50%;
            transition: all 0.5s ease;
        }
        .petal.colored {
            background: #e74c3c;
            box-shadow: 0 0 20px #e74c3c;
        }
        .petal:nth-child(1) { top: -25px; left: 30px; }
        .petal:nth-child(2) { top: 10px; left: 70px; }
        .petal:nth-child(3) { top: 50px; left: 70px; }
        .petal:nth-child(4) { top: 70px; left: 30px; }
        .petal:nth-child(5) { top: 70px; left: -10px; }
        .petal:nth-child(6) { top: 50px; left: -25px; }
        .petal:nth-child(7) { top: 10px; left: -25px; }
        .stem {
            position: absolute;
            width: 8px;
            height: 100px;
            background: #2d3436;
            bottom: -100px;
            left: 50%;
            transform: translateX(-50%);
            transition: all 0.5s;
        }
        .stem.green { background: linear-gradient(180deg, #27ae60, #229954); }
        .character {
            position: absolute;
            font-size: 4rem;
            z-index: 50;
        }
        .painter {
            bottom: 150px;
            left: 100px;
            animation: walk 4s ease-in-out infinite;
        }
        @keyframes walk {
            0%, 100% { transform: translateX(0); }
            50% { transform: translateX(50px); }
        }
        .bee {
            top: 120px;
            right: 100px;
            display: none;
            animation: chase 2s ease-in-out;
        }
        .bee.active { display: block; }
        @keyframes chase {
            0% { transform: translate(0, 0); }
            50% { transform: translate(-150px, 50px); }
            100% { transform: translate(0, 0); }
        }
        .words-panel {
            position: absolute;
            top: 50%;
            right: 30px;
            transform: translateY(-50%);
            background: rgba(255,255,255,0.95);
            border-radius: 20px;
            padding: 20px;
            max-width: 250px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            max-height: 500px;
            overflow-y: auto;
        }
        .words-panel h3 {
            margin-bottom: 15px;
            color: #6C5CE7;
            font-size: 1.1rem;
        }
        .word-item {
            padding: 12px;
            margin: 8px 0;
            background: white;
            border: 2px solid #dee2e6;
            border-radius: 10px;
            cursor: pointer;
            font-weight: bold;
            text-align: center;
            transition: all 0.3s;
        }
        .word-item:hover {
            transform: scale(1.05);
            border-color: #6C5CE7;
        }
        .word-item.correct {
            background: #d4edda;
            border-color: #28a745;
            animation: correct 0.5s ease;
        }
        @keyframes correct {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.2); }
        }
        .word-item.wrong {
            animation: wrong 0.5s ease;
        }
        @keyframes wrong {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }
        .bottom-panel {
            height: 120px;
            background: rgba(255,255,255,0.95);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 50px;
            box-shadow: 0 -5px 20px rgba(0,0,0,0.2);
        }
        .watering-can {
            width: 100px;
            height: 100px;
            position: relative;
            cursor: pointer;
            transition: all 0.3s;
        }
        .watering-can:hover {
            transform: scale(1.1);
        }
        .can-body {
            width: 80px;
            height: 60px;
            border-radius: 15px;
            border: 4px solid #2d3436;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: bold;
            color: white;
        }
        .can-red { background: linear-gradient(135deg, #ff7675, #e74c3c); }
        .can-blue { background: linear-gradient(135deg, #74b9ff, #3498db); }
        .can-green { background: linear-gradient(135deg, #55efc4, #00b894); }
        .can-spout {
            width: 30px;
            height: 10px;
            background: #2d3436;
            border-radius: 0 8px 8px 0;
            position: absolute;
            right: -5px;
            top: 25px;
        }
        .can-handle {
            width: 40px;
            height: 50px;
            border: 4px solid #2d3436;
            border-radius: 50%;
            border-left: none;
            position: absolute;
            left: -15px;
            top: 5px;
        }
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }
        .modal.active { display: flex; }
        .modal-content {
            background: white;
            border-radius: 20px;
            padding: 40px;
            text-align: center;
            max-width: 500px;
        }
        .modal-icon { font-size: 6rem; margin-bottom: 20px; }
        .modal-title { font-size: 2.5rem; color: #6C5CE7; margin-bottom: 15px; }
        .modal-text { font-size: 1.3rem; color: #636e72; margin-bottom: 25px; }
        .modal-btn {
            padding: 15px 40px;
            font-size: 1.2rem;
            font-weight: bold;
            background: linear-gradient(135deg, #6C5CE7, #5848c2);
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
        }
    </style>
</head>
<body>
<div class="game-screen">
    <div class="top-bar">
        <div class="progress-container">
            <div class="progress-bar" id="progressBar"></div>
            <div class="water-drops" id="waterDrops"></div>
        </div>
        <div class="timer" id="timer">${gameConfig.settings.timer}</div>
    </div>
    
    <div class="game-area">
        <div class="butterfly-container">
            <div class="butterfly" id="butterfly">
                <div class="butterfly-head">
                    <div class="antenna antenna-left"></div>
                    <div class="antenna antenna-right"></div>
                </div>
                <div class="butterfly-body"></div>
                <div class="wing wing-left" id="wingLeft"></div>
                <div class="wing wing-right" id="wingRight"></div>
            </div>
            <div class="rose-container">
                <div class="rose" id="rose">
                    <div class="petal"></div>
                    <div class="petal"></div>
                    <div class="petal"></div>
                    <div class="petal"></div>
                    <div class="petal"></div>
                    <div class="petal"></div>
                    <div class="petal"></div>
                    <div class="rose-center"></div>
                </div>
                <div class="stem" id="stem"></div>
            </div>
        </div>
        
        <div class="character painter">${heroDisplay}</div>
        <div class="character bee" id="bee">${enemyDisplay}</div>
        
        <div class="words-panel">
            <h3>${t.selectWord}</h3>
            <div id="wordsList"></div>
        </div>
    </div>
    
    <div class="bottom-panel">
        <div class="watering-can">
            <div class="can-body can-red">die</div>
            <div class="can-spout"></div>
            <div class="can-handle"></div>
        </div>
        <div class="watering-can">
            <div class="can-body can-blue">der</div>
            <div class="can-spout"></div>
            <div class="can-handle"></div>
        </div>
        <div class="watering-can">
            <div class="can-body can-green">das</div>
            <div class="can-spout"></div>
            <div class="can-handle"></div>
        </div>
    </div>
</div>

<div class="modal" id="winModal">
    <div class="modal-content">
        <div class="modal-icon">${rewardDisplay}</div>
        <div class="modal-title">${t.winTitle}</div>
        <div class="modal-text">${gameConfig.settings.winText}</div>
        <button class="modal-btn" onclick="location.reload()">${t.tryAgain}</button>
    </div>
</div>

<script>
const wordsData = ${JSON.stringify(wordsData)};
const colors = { die: '#ff7675', der: '#74b9ff', das: '#55efc4' };
let currentArticle = null;
let correctCount = 0;
let timer = ${gameConfig.settings.timer};
let timerInterval = null;
let petalIndex = 0;

function init() {
    for(let i=0; i<6; i++) {
        document.getElementById('wingLeft').innerHTML += '<div class="wing-segment"></div>';
        document.getElementById('wingRight').innerHTML += '<div class="wing-segment"></div>';
    }
    startRound();
}

function startRound() {
    const articles = ['die', 'der', 'das'];
    currentArticle = articles[Math.floor(Math.random() * articles.length)];
    highlightCan(currentArticle);
    generateWords();
    startTimer();
}

function highlightCan(article) {
    document.querySelectorAll('.watering-can').forEach(can => can.style.boxShadow = '');
    const index = article === 'die' ? 0 : article === 'der' ? 1 : 2;
    document.querySelectorAll('.watering-can')[index].style.boxShadow = '0 0 30px ' + colors[article];
}

function generateWords() {
    const list = document.getElementById('wordsList');
    list.innerHTML = '';
    const correct = [...wordsData[currentArticle]].sort(() => Math.random() - 0.5).slice(0, 2);
    const others = Object.keys(wordsData).filter(a => a !== currentArticle);
    const wrong = wordsData[others[Math.floor(Math.random() * others.length)]][0];
    const words = [...correct, wrong].sort(() => Math.random() - 0.5);
    
    words.forEach(word => {
        const div = document.createElement('div');
        div.className = 'word-item';
        div.textContent = word;
        div.onclick = () => checkWord(word, div);
        list.appendChild(div);
    });
}

function checkWord(word, el) {
    clearInterval(timerInterval);
    const isCorrect = wordsData[currentArticle].includes(word);
    
    if (isCorrect) {
        el.classList.add('correct');
        const segments = document.querySelectorAll('.wing-segment');
        const empty = Array.from(segments).find(s => !s.classList.contains('colored'));
        if (empty) {
            empty.textContent = word;
            empty.style.backgroundColor = colors[currentArticle];
            empty.classList.add('colored');
        }
        const petals = document.querySelectorAll('.petal');
        if (petalIndex < petals.length) {
            petals[petalIndex].classList.add('colored');
            petalIndex++;
            if (petalIndex >= petals.length) {
                document.getElementById('stem').classList.add('green');
                document.getElementById('rose').classList.add('animated');
            }
        }
        const drops = document.getElementById('waterDrops');
        const drop = document.createElement('span');
        drop.className = 'water-drop';
        drop.textContent = 'üíß';
        drops.appendChild(drop);
        document.getElementById('progressBar').style.width = ((++correctCount) / 12 * 100) + '%';
        
        setTimeout(() => {
            if (correctCount >= 12) {
                document.getElementById('butterfly').classList.add('animated');
                setTimeout(() => {
                    document.getElementById('winModal').classList.add('active');
                }, 2000);
            } else {
                startRound();
            }
        }, 1500);
    } else {
        el.classList.add('wrong');
        const bee = document.getElementById('bee');
        bee.classList.add('active');
        setTimeout(() => {
            bee.classList.remove('active');
            startRound();
        }, 2000);
    }
}

function startTimer() {
    timer = ${gameConfig.settings.timer};
    document.getElementById('timer').textContent = timer;
    document.getElementById('timer').classList.remove('warning');
    timerInterval = setInterval(() => {
        timer--;
        document.getElementById('timer').textContent = timer;
        if (timer <= 5) document.getElementById('timer').classList.add('warning');
        if (timer <= 0) {
            clearInterval(timerInterval);
            document.getElementById('bee').classList.add('active');
            setTimeout(() => {
                document.getElementById('bee').classList.remove('active');
                startRound();
            }, 2000);
        }
    }, 1000);
}

init();
</script>
</body>
</html>`;
}

// –ü–û–ö–ê–ó–ê–¢–¨ –ü–†–ï–î–ü–†–û–°–ú–û–¢–†
function showPreview() {
    console.log('–ü–æ–∫–∞–∑ –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä–∞...');
    collectAllData();
    
    const gameHTML = generateGameHTML();
    const previewArea = document.getElementById('previewArea');
    
    // –°–æ–∑–¥–∞—ë–º iframe —Å –∏–≥—Ä–æ–π
    previewArea.innerHTML = '<iframe class="preview-iframe" srcdoc="' + gameHTML.replace(/"/g, '&quot;') + '"></iframe>';
    
    console.log('–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –∑–∞–≥—Ä—É–∂–µ–Ω');
}

// –ì–ï–ù–ï–†–ê–¶–ò–Ø –ö–û–î–ê IFRAME
function generateIframeCode() {
    console.log('–ì–µ–Ω–µ—Ä–∞—Ü–∏—è iframe –∫–æ–¥–∞...');
    collectAllData();
    
    const gameHTML = generateGameHTML();
    
    // –°–æ–∑–¥–∞—ë–º iframe –∫–æ–¥
    const iframeCode = '<iframe width="800" height="600" style="border:none; border-radius:20px;" srcdoc="' + 
                      gameHTML.replace(/"/g, '&quot;') + 
                      '"></iframe>';
    
    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≤ –º–æ–¥–∞–ª—å–Ω–æ–º –æ–∫–Ω–µ
    document.getElementById('iframeCodeDisplay').textContent = iframeCode;
    document.getElementById('codeModal').classList.add('active');
    
    console.log('–ö–æ–¥ iframe —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω –∏ –ø–æ–∫–∞–∑–∞–Ω');
}

// –ö–û–ü–ò–†–û–í–ê–ù–ò–ï –ö–û–î–ê
function copyIframeCode() {
    const code = document.getElementById('iframeCodeDisplay').textContent;
    const copyBtn = document.getElementById('copyBtn');
    
    navigator.clipboard.writeText(code).then(() => {
        copyBtn.textContent = '‚úÖ –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ!';
        copyBtn.classList.add('copied');
        
        setTimeout(() => {
            copyBtn.textContent = 'üìã –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å';
            copyBtn.classList.remove('copied');
        }, 3000);
        
        console.log('–ö–æ–¥ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞');
    }).catch(err => {
        console.error('–û—à–∏–±–∫–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è:', err);
        alert('–ù–µ —É–¥–∞–ª–æ—Å—å —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å. –í—ã–¥–µ–ª–∏—Ç–µ –∫–æ–¥ –∏ —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –≤—Ä—É—á–Ω—É—é (Ctrl+C)');
    });
}

// –ó–ê–ö–†–´–¢–¨ –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û
function closeCodeModal() {
    document.getElementById('codeModal').classList.remove('active');
}

// –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –ø–æ –∫–ª–∏–∫—É –≤–Ω–µ –µ–≥–æ
document.getElementById('codeModal').addEventListener('click', function(e) {
    if (e.target === this) {
        closeCodeModal();
    }
});

console.log('–†–µ–¥–∞–∫—Ç–æ—Ä –∑–∞–≥—Ä—É–∂–µ–Ω –∏ –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ!');
</script>

</body>
</html>
