<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>FINAL EDITOR 2026 | Оживление Розы</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        :root { --p: #6C5CE7; --a: #FD79A8; --dark: #2D3436; }
        body { font-family: 'Montserrat', sans-serif; background: #f0f2f5; margin: 0; padding: 20px; }
        .main-card { max-width: 1000px; margin: 0 auto; background: white; border-radius: 40px; border: 8px solid var(--p); overflow: hidden; box-shadow: 0 40px 60px rgba(0,0,0,0.1); }
        .header { background: var(--p); padding: 25px; color: white; display: flex; align-items: center; justify-content: space-between; }
        .content { padding: 30px; }
        .grid { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 15px; margin-bottom: 20px; }
        textarea { width: 100%; height: 100px; border-radius: 15px; border: 2px solid #ddd; padding: 10px; font-family: inherit; resize: none; box-sizing: border-box; }
        label { display: block; font-size: 0.7rem; font-weight: 800; color: #888; margin-bottom: 5px; text-transform: uppercase; }
        input, select { width: 100%; padding: 12px; border-radius: 10px; border: 2px solid #ddd; box-sizing: border-box; }
        .btn-build { background: var(--a); color: white; border: none; padding: 20px; border-radius: 20px; font-weight: 900; font-size: 1.2rem; cursor: pointer; width: 100%; transition: 0.3s; }
        .btn-build:hover { transform: scale(1.02); background: #e84393; }
        #modal { display: none; position: fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.95); z-index:9999; align-items:center; justify-content:center; }
        .modal-box { background: white; padding: 30px; border-radius: 30px; width: 90%; max-width: 700px; text-align: center; }
        #res-code { background: #1a1a1a; color: #00ff00; padding: 15px; border-radius: 10px; font-family: monospace; font-size: 0.8rem; word-break: break-all; max-height: 200px; overflow-y: auto; text-align: left; margin: 15px 0; }
    </style>
</head>
<body>

<div class="main-card">
    <div class="header">
        <div style="display:flex; align-items:center; gap:15px;">
            <img src="https://raw.githubusercontent.com/irinschensmagen-alt/Redaktor-/main/logo.png" width="60">
            <h2 style="margin:0;">РЕДАКТОР ИГРЫ</h2>
        </div>
        <select id="lang" style="width:150px; background:white;">
            <option value="ru">Русский</option>
            <option value="de">Deutsch</option>
            <option value="en">English</option>
            <option value="es">Español</option>
            <option value="it">Italiano</option>
        </select>
    </div>

    <div class="content">
        <div class="grid">
            <div><label style="color:#74b9ff">DER</label><textarea id="d">Hund, Fisch, Bär</textarea></div>
            <div><label style="color:#ff7675">DIE</label><textarea id="f">Katze, Maus, Kuh</textarea></div>
            <div><label style="color:#55efc4">DAS</label><textarea id="s">Pferd, Reh, Huhn</textarea></div>
        </div>
        <label>Музыка (URL mp3)</label>
        <input type="text" id="m" placeholder="Вставьте прямую ссылку" style="margin-bottom:20px;">
        
        <button class="btn-build" onclick="generate()">СКОПИРОВАТЬ КОД ДЛЯ GENIALLY</button>
    </div>
</div>

<div id="modal">
    <div class="modal-box">
        <h3>КОД ГОТОВ!</h3>
        <div id="res-code"></div>
        <button class="btn-build" onclick="copy()">СКОПИРОВАТЬ В БУФЕР</button>
        <button onclick="document.getElementById('modal').style.display='none'" style="margin-top:15px; border:none; background:none; color:gray; cursor:pointer;">Закрыть</button>
    </div>
</div>

<script>
    function generate() {
        const d_val = document.getElementById('d').value;
        const f_val = document.getElementById('f').value;
        const s_val = document.getElementById('s').value;
        const m_val = document.getElementById('m').value;
        const l_val = document.getElementById('lang').value;

        const trans = {
            ru: "Превосходно!", de: "Ausgezeichnet!", en: "Excellent!", es: "¡Excelente!", it: "Eccellente!"
        };

        const engine = `
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <style>
        body { margin:0; overflow:hidden; font-family:sans-serif; background:url('https://raw.githubusercontent.com/irinschensmagen-alt/Redaktor-/main/Background_Garden.jpg') center/cover; height:100vh; }
        .cans { position:absolute; left:20px; top:50%; transform:translateY(-50%); display:flex; flex-direction:column; gap:25px; }
        .can { width:80px; transition:0.4s; cursor:pointer; position:relative; }
        .can.active { filter: drop-shadow(0 0 10px gold); transform: scale(1.1); }
        .can.pour { transform: rotate(-50deg); }
        .can-txt { position:absolute; top:-10px; width:100%; text-align:center; color:white; font-weight:900; font-size:18px; text-shadow:1px 1px 2px black; }
        #rose { position:absolute; top:45%; left:50%; transform:translate(-50%,-50%); width:400px; filter: grayscale(1); transition: 1s; }
        #butterfly { position:absolute; top:45%; left:50%; transform:translate(-50%,-50%); width:380px; }
        #artist { position:absolute; bottom:20px; left:20px; width:140px; transition:0.5s; }
        #bee { position:absolute; top:20%; left:-150px; width:100px; transition: 2s linear; }
        .bar { position:absolute; top:20px; left:50%; transform:translateX(-50%); display:flex; gap:5px; background:rgba(255,255,255,0.8); padding:10px; border-radius:50px; }
        .drop { width:20px; opacity:0.1; transition:0.3s; }
        .drop.on { opacity:1; filter: drop-shadow(0 0 5px cyan); }
        .ui { position:absolute; right:30px; top:50%; transform:translateY(-50%); background:white; padding:20px; border-radius:25px; display:none; min-width:180px; text-align:center; }
        .w-btn { padding:10px; margin:5px 0; background:#f0f0f0; border-radius:10px; cursor:pointer; font-weight:bold; }
        @keyframes glow { from { filter: grayscale(0) drop-shadow(0 0 5px red); } to { filter: grayscale(0) drop-shadow(0 0 15px red); } }
        .alive { animation: glow 1s infinite alternate; }
    </style>
</head>
<body>
    <audio autoplay loop src="${m_val}"></audio>
    <div class="bar" id="b"></div>
    <div class="cans">
        <div class="can" id="c-der"><div class="can-txt">der</div><img src="https://cdn-icons-png.flaticon.com/512/4343/4343028.png" style="width:100%; filter:hue-rotate(180deg)"></div>
        <div class="can" id="c-die"><div class="can-txt">die</div><img src="https://cdn-icons-png.flaticon.com/512/4343/4343028.png" style="width:100%; filter:hue-rotate(300deg)"></div>
        <div class="can" id="c-das"><div class="can-txt">das</div><img src="https://cdn-icons-png.flaticon.com/512/4343/4343028.png" style="width:100%; filter:hue-rotate(100deg)"></div>
    </div>
    <img id="rose" src="https://raw.githubusercontent.com/irinschensmagen-alt/Redaktor-/main/Rose_Path.png">
    <img id="butterfly" src="https://raw.githubusercontent.com/irinschensmagen-alt/Redaktor-/main/Butterfly_Alpha.png">
    <img id="artist" src="https://raw.githubusercontent.com/irinschensmagen-alt/Redaktor-/main/%D0%92%D0%B5%D1%81%D1%91%D0%BB%D1%8B%D0%B9%20%D1%85%D1%83%D0%B4%D0%BE%D0%B6%D0%BD%D0%B8%D0%BA.png">
    <img id="bee" src="https://raw.githubusercontent.com/irinschensmagen-alt/Redaktor-/main/%D0%97%D0%BB%D0%B0%D1%8F%20%D0%BF%D1%87%D0%B5%D0%BB%D0%B0.png">
    <div class="ui" id="u"></div>
    <script>
        const words = { 
            der: "${d_val}".split(",").map(s=>s.trim()), 
            die: "${f_val}".split(",").map(s=>s.trim()), 
            das: "${s_val}".split(",").map(s=>s.trim()) 
        };
        let cur = ''; let score = 0;
        function init() {
            for(let i=0; i<10; i++) document.getElementById('b').innerHTML += '<img src="https://raw.githubusercontent.com/irinschensmagen-alt/Redaktor-/main/%D0%94%D0%B5%D0%BA%D0%BE%D1%80%D0%B0%D1%82%D0%B8%D0%B2%D0%BD%D1%8B%D0%B9%20%D1%8D%D0%BB%D0%B5%D0%BC%D0%B5%D0%BD%D1%82%20%D0%9A%D0%B0%D0%BF%D0%BB%D1%8F.png" class="drop">';
            next();
        }
        function next() {
            const arts = ['der','die','das'];
            cur = arts[Math.floor(Math.random()*3)];
            document.querySelectorAll('.can').forEach(c=>c.classList.remove('active'));
            document.getElementById('c-'+cur).classList.add('active');
            const u = document.getElementById('u'); u.style.display = 'block';
            u.innerHTML = '';
            const pool = [
                {t: words.der[Math.floor(Math.random()*words.der.length)], a:'der'},
                {t: words.die[Math.floor(Math.random()*words.die.length)], a:'die'},
                {t: words.das[Math.floor(Math.random()*words.das.length)], a:'das'}
            ].sort(()=>Math.random()-0.5);
            pool.forEach(w => {
                const b = document.createElement('div'); b.className = 'w-btn'; b.innerText = w.t;
                b.onclick = () => {
                    if(w.a === cur) {
                        score++;
                        document.getElementById('c-'+cur).classList.add('pour');
                        if(score <= 10) document.querySelectorAll('.drop')[score-1].classList.add('on');
                        if(score === 1) document.getElementById('rose').classList.add('alive');
                        setTimeout(()=>{ 
                            document.getElementById('c-'+cur).classList.remove('pour'); 
                            if(score >= 10) { alert("${trans[l_val]}"); location.reload(); } else next(); 
                        }, 800);
                    } else {
                        const b = document.getElementById('bee'); b.style.left = '110%';
                        document.getElementById('artist').style.transform = 'translateX(80px)';
                        setTimeout(()=>{ b.style.transition='none'; b.style.left='-150px'; setTimeout(()=>b.style.transition='2s linear',50); document.getElementById('artist').style.transform=''; }, 2000);
                    }
                };
                u.appendChild(b);
            });
        }
        window.onload = init;
    <\/script>
</body>
</html>`;

        const finalCode = `<iframe srcdoc='${engine.replace(/'/g, "&#39;")}' width="1000" height="600" frameborder="0" scrolling="no"></iframe>`;
        document.getElementById('res-code').innerText = finalCode;
        document.getElementById('modal').style.display = 'flex';
    }

    function copy() {
        const text = document.getElementById('res-code').innerText;
        navigator.clipboard.writeText(text).then(() => alert('Код скопирован!'));
    }
</script>
</body>
</html>
