<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–†–µ–¥–∞–∫—Ç–æ—Ä –∏–≥—Ä—ã | Deutsch interaktiv</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        :root { --p: #6C5CE7; --a: #FD79A8; --dark: #2D3436; }
        body { font-family: 'Montserrat', sans-serif; background: #f0f2f5; margin: 0; padding: 20px; }
        .editor-container { max-width: 1100px; margin: 0 auto; background: white; border-radius: 40px; border: 6px solid var(--p); overflow: hidden; box-shadow: 0 30px 60px rgba(0,0,0,0.1); }
        
        /* –®–ê–ü–ö–ê */
        .header { background: var(--p); padding: 30px; color: white; display: flex; align-items: center; justify-content: space-between; }
        .logo-block { display: flex; align-items: center; gap: 20px; }
        
        /* –ë–õ–û–ö–ò */
        .content { padding: 40px; display: grid; grid-template-columns: 1fr 1fr; gap: 30px; }
        .media-card { background: #f8f9ff; border: 2px solid #e1e2ef; padding: 25px; border-radius: 25px; }
        h3 { margin-top: 0; color: var(--p); font-size: 1rem; text-transform: uppercase; border-bottom: 2px solid #eee; padding-bottom: 10px; }
        
        label { display: block; font-size: 0.75rem; font-weight: 800; color: #666; margin: 15px 0 5px; }
        input[type="text"], textarea { width: 100%; padding: 12px; border-radius: 10px; border: 2px solid #ddd; font-family: inherit; box-sizing: border-box; }
        .file-row { display: flex; gap: 10px; align-items: center; }
        input[type="file"] { font-size: 0.7rem; }

        /* –ö–ù–û–ü–ö–ê –ì–ï–ù–ï–†–ê–¶–ò–ò */
        .footer-action { background: var(--dark); padding: 40px; text-align: center; }
        .btn-build { background: var(--a); color: white; border: none; padding: 25px 60px; border-radius: 20px; font-weight: 900; font-size: 1.2rem; cursor: pointer; transition: 0.3s; }
        .btn-build:hover { transform: scale(1.05); }

        /* –û–ö–ù–û –†–ï–ó–£–õ–¨–¢–ê–¢–ê */
        #result-box { display: none; margin-top: 20px; padding: 20px; background: #1e1e1e; border-radius: 15px; }
        #code-out { color: #00ff00; font-family: monospace; font-size: 0.8rem; word-break: break-all; white-space: pre-wrap; height: 200px; overflow-y: auto; }
    </style>
</head>
<body>

<div class="editor-container">
    <div class="header">
        <div class="logo-block">
            <img src="https://raw.githubusercontent.com/irinschensmagen-alt/Redaktor-/main/logo.png" width="80">
            <div>
                <h1 style="margin:0;">–†–ï–î–ê–ö–¢–û–† –ò–ì–†–´</h1>
                <p style="margin:0; opacity:0.8;">Deutsch interaktiv | –õ—ë–≥–∫–∏–π —É—Ä–æ–≤–µ–Ω—å</p>
            </div>
        </div>
    </div>

    <div class="content">
        <div class="media-card">
            <h3>üñº –ì—Ä–∞—Ñ–∏–∫–∞ –∏ –®–∞–±–ª–æ–Ω—ã</h3>
            
            <label>–®–∞–±–ª–æ–Ω –ë–∞–±–æ—á–∫–∏ (SVG –∏–ª–∏ PNG)</label>
            <div class="file-row">
                <input type="text" id="img-butterfly" placeholder="–°—Å—ã–ª–∫–∞ –Ω–∞ –±–∞–±–æ—á–∫—É">
                <input type="file" onchange="toBase64(this, 'img-butterfly')">
            </div>

            <label>–ó–ª–∞—è –ø—á–µ–ª–∞</label>
            <div class="file-row">
                <input type="text" id="img-bee" placeholder="–°—Å—ã–ª–∫–∞ –Ω–∞ –ø—á–µ–ª—É">
                <input type="file" onchange="toBase64(this, 'img-bee')">
            </div>

            <label>–í–µ—Å—ë–ª—ã–π —Ö—É–¥–æ–∂–Ω–∏–∫</label>
            <div class="file-row">
                <input type="text" id="img-hero" placeholder="–°—Å—ã–ª–∫–∞ –Ω–∞ –≥–µ—Ä–æ—è">
                <input type="file" onchange="toBase64(this, 'img-hero')">
            </div>

            <label>–§–æ–Ω–æ–≤–∞—è –∑–∞—Å—Ç–∞–≤–∫–∞</label>
            <div class="file-row">
                <input type="text" id="img-bg" placeholder="–°—Å—ã–ª–∫–∞ –Ω–∞ —Ñ–æ–Ω">
                <input type="file" onchange="toBase64(this, 'img-bg')">
            </div>
        </div>

        <div class="media-card">
            <h3>üîä –ó–≤—É–∫–∏ –∏ –ö–æ–Ω—Ç–µ–Ω—Ç</h3>
            
            <label>–ó–≤—É–∫ –∂—É–∂–∂–∞–Ω–∏—è –ø—á–µ–ª—ã (MP3)</label>
            <div class="file-row">
                <input type="text" id="snd-bee" placeholder="–°—Å—ã–ª–∫–∞ –Ω–∞ –∑–≤—É–∫">
                <input type="file" onchange="toBase64(this, 'snd-bee')">
            </div>

            <label>–°–ª–æ–≤–∞ –¥–ª—è –∏–≥—Ä—ã (—á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é)</label>
            <textarea id="words-list" rows="4">der Apfel, die Lampe, das Haus, der Hund</textarea>
            
            <label>–¢–µ–∫—Å—Ç —Ñ–∏–Ω–∞–ª–∞</label>
            <input type="text" id="text-win" value="GUT GEMACHT! –¢—ã –º–∞—Å—Ç–µ—Ä!">

            <label>–Ø–∑—ã–∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞</label>
            <select id="ui-lang">
                <option value="ru">–†—É—Å—Å–∫–∏–π</option>
                <option value="de">Deutsch</option>
            </select>
        </div>
    </div>

    <div class="footer-action">
        <button class="btn-build" onclick="buildForGenially()">–°–ì–ï–ù–ï–†–ò–†–û–í–ê–¢–¨ –ö–û–î –ò–ì–†–´ –î–õ–Ø GENIALLY</button>
        
        <div id="result-box">
            <p style="color:white; font-weight:900;">–°–ö–û–ü–ò–†–£–ô–¢–ï –≠–¢–û–¢ –ö–û–î –ò –í–°–¢–ê–í–¨–¢–ï –í GENIALLY:</p>
            <div id="code-out"></div>
            <button class="btn-build" style="background:var(--p); margin-top:20px; font-size:0.8rem; padding:15px;" onclick="copyCode()">–ö–û–ü–ò–†–û–í–ê–¢–¨ –ö–û–î</button>
        </div>
    </div>
</div>

<script>
    // –§—É–Ω–∫—Ü–∏—è –ø–µ—Ä–µ–≤–æ–¥–∞ —Ñ–∞–π–ª–∞ —Å –∫–æ–º–ø—å—é—Ç–µ—Ä–∞ –≤ —Å—Ç—Ä–æ–∫—É Base64
    function toBase64(input, targetId) {
        if (input.files && input.files[0]) {
            const reader = new FileReader();
            reader.onload = (e) => { document.getElementById(targetId).value = e.target.result; };
            reader.readAsDataURL(input.files[0]);
        }
    }

    function buildForGenially() {
        // –î–∞–Ω–Ω—ã–µ –∏–∑ —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞
        const cfg = {
            butterfly: document.getElementById('img-butterfly').value || 'https://raw.githubusercontent.com/irinschensmagen-alt/Redaktor-/main/Butterfly.png',
            bee: document.getElementById('img-bee').value || 'https://raw.githubusercontent.com/irinschensmagen-alt/Redaktor-/main/%D0%97%D0%BB%D0%B0%D1%8F%20%D0%BF%D1%87%D0%B5%D0%BB%D0%B0.png',
            hero: document.getElementById('img-hero').value || 'https://raw.githubusercontent.com/irinschensmagen-alt/Redaktor-/main/%D0%92%D0%B5%D1%81%D1%91%D0%BB%D1%8B%D0%B9%20%D1%85%D1%83%D0%B4%D0%BE%D0%B6%D0%BD%D0%B8%D0%BA.png',
            bg: document.getElementById('img-bg').value || 'https://raw.githubusercontent.com/irinschensmagen-alt/Redaktor-/main/Background_Garden.jpg',
            beeSnd: document.getElementById('snd-bee').value || '',
            words: document.getElementById('words-list').value,
            winTxt: document.getElementById('text-win').value
        };

        // –¢–µ–∫—Å—Ç –°–ê–ú–û–ô –ò–ì–†–´ (–±–µ–∑ —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞)
        const gameCode = `
<!DOCTYPE html>
<html>
<head>
    <style>
        body { margin:0; overflow:hidden; background: url('${cfg.bg}') center/cover; height:100vh; font-family:sans-serif; text-align:center; }
        #obj { position:absolute; top:45%; left:55%; transform:translate(-50%,-50%); width:400px; }
        #artist { position:absolute; bottom:20px; left:20px; width:150px; transition:0.5s; }
        #bee { position:absolute; top:20%; left:-150px; width:100px; }
        #word-plate { background:white; padding:20px; border-radius:30px; border:5px solid #6C5CE7; display:inline-block; margin-top:50px; font-size:30px; font-weight:900; }
        .btns { position:absolute; bottom:30px; right:30px; display:flex; gap:10px; }
        .b { padding:15px 30px; border:none; border-radius:10px; color:white; font-weight:bold; cursor:pointer; font-size:1.2rem; }
    </style>
</head>
<body>
    <div id="word-plate">–ó–ê–ì–†–£–ó–ö–ê...</div>
    <img id="obj" src="${cfg.butterfly}">
    <img id="artist" src="${cfg.hero}">
    <img id="bee" src="${cfg.bee}">
    <audio id="beeSnd" src="${cfg.beeSnd}"></audio>
    <div class="btns">
        <button class="b" style="background:#74b9ff" onclick="check('der')">DER</button>
        <button class="b" style="background:#ff7675" onclick="check('die')">DIE</button>
        <button class="b" style="background:#55efc4" onclick="check('das')">DAS</button>
    </div>
    <script>
        const words = "${cfg.words}".split(',').map(s => s.trim());
        let cur = 0;
        document.getElementById('word-plate').innerText = words[cur];

        function check(art) {
            if(words[cur].toLowerCase().startsWith(art)) {
                cur++;
                if(cur < words.length) document.getElementById('word-plate').innerText = words[cur];
                else alert("${cfg.winTxt}");
            } else {
                document.getElementById('beeSnd').play();
                document.getElementById('bee').animate([{left:'-150px'}, {left:'110%'}], 2000);
                document.getElementById('artist').style.transform = 'translateX(100px)';
                setTimeout(()=> document.getElementById('artist').style.transform = 'translateX(0)', 2000);
            }
        }
    <\/script>
</body>
</html>`;

        // –£–ø–∞–∫–æ–≤–∫–∞ –≤ Iframe –¥–ª—è Genially
        const finalIframe = `<iframe srcdoc='${gameCode.replace(/'/g, "&#39;")}' width="1000" height="600" frameborder="0" scrolling="no"></iframe>`;
        
        document.getElementById('code-out').innerText = finalIframe;
        document.getElementById('result-box').style.display = 'block';
    }

    function copyCode() {
        const text = document.getElementById('code-out').innerText;
        navigator.clipboard.writeText(text).then(() => alert('–ö–æ–¥ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω! –í—Å—Ç–∞–≤—å—Ç–µ –µ–≥–æ –≤ Genially.'));
    }
</script>

</body>
</html>
